// Global color config
@import 'libs';
@import 'helpers';

// --- Base Palette ---
// -> PRIVATE, do not use outside this settings file
$white: #fff;
$gray: #ebf0f0;

$turquoise: #7dbfcb;
$light-turquoise: #b7d1d8;

$blue: #3b57a0;
$light-blue: #5899fc;
$dark-blue: #3c4b72;

$yellow: #fed341;
$pink: #f035a6;

// --- Themes ---
// -> PUBLIC, use these for color references
$themes: (
  'default': (
    'text-primary': $dark-blue,
    'text-secondary': #666d7d,
    'text-tertiary': darken($gray, 30),
    'highlight': $pink,
    'accent': $turquoise,
    'bg': $white,
    'island': $white,
    'well': $gray,
    'border': darken($gray, 10)
  ),
  'reverse': (
    'text-primary': $white,
    'text-secondary': lighten($dark-blue, 60),
    'text-tertiary': lighten($dark-blue, 40),
    'highlight': $yellow,
    'accent': $turquoise,
    'bg': $dark-blue,
    'island': lighten($dark-blue, 10),
    'well': darken($dark-blue, 10),
    'border': darken($dark-blue, 20)
  ),
  'wash-turquoise': (
    'text-primary': $white,
    'text-secondary': $dark-blue,
    'text-tertiary': darken($turquoise, 40),
    'highlight': $white,
    'accent': $dark-blue,
    'bg': $turquoise,
    'island': lighten($turquoise, 10),
    'well': darken($turquoise, 10),
    'border': darken($turquoise, 20)
  ),
  'wash-blue': (
    'text-primary': $white,
    'text-secondary': $dark-blue,
    'text-tertiary': darken($blue, 30),
    'highlight': $white,
    'accent': $dark-blue,
    'bg': $blue,
    'island': lighten($blue, 10),
    'well': darken($blue, 10),
    'border': darken($blue, 20)
  ),
  'wash-pink': (
    'text-primary': $white,
    'text-secondary': $dark-blue,
    'text-tertiary': darken($pink, 30),
    'highlight': $white,
    'accent': $dark-blue,
    'bg': $pink,
    'island': lighten($pink, 10),
    'well': darken($pink, 10),
    'border': darken($pink, 20)
  )
);

// --- Helpers & mixins ---
// -> PUBLIC

// getter function to access color map values
// -> PARAMS
//    - STRING/LIST $colors: the name(s) of the color roles, e.g. 'highlight'
//    - STRING $name (optional): the name of the theme, e.g. 'default', 'dark'
//    - NUMBER $grade (optional): 'grade' (as in 'gradation') the color to be darker or lighter
//      -> pass in a negative number to darken the color
//      -> pass in a positive number to lighten the color
// -> PUBLIC
// -> USAGE:
//    - color: color('text' 'primary');
//    - color: color('highlight' 'primary', 'reverse');
@function color($color, $theme-name: 'default', $grade: 0, $opacity: 1) {
  // first extract the 'theme' nested map
  $theme: map-get($themes, $theme-name);

  // grab the color value from the $themes map
  $value: map-get($theme, $color);

  // lighten or darken the color
  @if ($grade < 0) {
    $value: shade($value, abs($grade));
  } 

  @if ($grade > 0) {
    $value: tint($value, abs($grade));
  }

  @if ($opacity < 1) {
    $value: rgba($value, $opacity);
  }

  @return $value;
}

// create default and custom property versions of a color
// -> PUBLIC
// -> USAGE
//    - @include color(background-color, highlight);
@mixin color($prop, $color, $theme: 'default', $important: false) {
  #{$prop}: important(color($color, $theme), $important);
  #{$prop}: important(var(--color-#{$color}, color($color, $theme)), $important);
}

@mixin color-fg($color, $props...) {
  @include color(color, $color, $props...);
}

@mixin color-bg($color, $props...) {
  @include color(background-color, $color, $props...);
}

// set up custom properties with the right values for a theme container
// -> PUBLIC
// -> USAGE
//    - body { @include theme('default'); }
@mixin theme($theme, $include-props: false) {
  
  // create a list of custom properties for each color role in a theme
  // -> e.g. --color-text-primary
  $theme-colors: map-get($themes, $theme);
  
  @each $name, $color in $theme-colors {
    --color-#{$name}: #{$color};
  }
  
  // include some background, border, etc. props in the selector?
  // -> use this only for setting defaults. Modifier classes can just redefine the custom properties (e.g. --color-text-primary).
  @if $include-props {
    @include color('background-color', 'bg');
    @include color('border-color', 'border');
    @include color('color', 'text-secondary');

    // highlight color when you select something
    &::selection {
      @include color('background-color', 'highlight');
      @include color('color', 'bg');
      text-shadow: none;
    }
  }
}
